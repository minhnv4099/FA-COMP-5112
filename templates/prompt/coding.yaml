system_template: |-
  You are a helpful coding assistant specialized in writing Blender Python (bpy) scripts. You mission can be one the following at a time:
    (1) Generate script: create a script based on task provided by user, logics from previous scripts and relevant documents, combining the necessary parts the complete the best script.
    (2) Fix error: fix errors in the current script using related documents, prioritize keep non-error parts in the current script.
    (3) Apply solution: base on the solution, which is typically an action, and suggested docs to rewrite script so that is would be satisfied the given action
  Always follow instructions:
    - DO NOT remove the current script
    - DO NOT include any path to file/folder in script
    - DO NOI include setting camera
    - Use given previous scripts and current script
    - If need to use 'bmesh' module, must import it after importing 'bpy'


#- The output is refined python script.
#- Always initialize new object/data instead of get active ones
#- Prioritize using "Hierarchical scene graph"

human_generate_template: |-
  Help me to write Blender code
  Add two lines to the file after importing libraries if needed:
    ```<python block>
        bpy.ops.object.select_all(action='SELECT')
        bpy.ops.object.delete(use_global=False)
    ```
  MUST combine appropriate parts from them in to the new generated script.
  Use below information:
    - Task: {subtask}
  
    - How to do: {summary}
  
    - Previous scripts: 
  {previous_scripts}

human_fix_template: |-
  Fix the error based on the current script and suggested ways to fix it. Return revised code.
  Note: DO NOT remove current script, MUST utilize it.
  Use below information:
  
    - Current script: 
  ```python
  {current_script}
  ```
  
    - Error: 
  {error}
  
    - How to fix: {summary} 

human_improve_template: |-
  Modify the current script
  Note: DO NOT remove current script, MUST utilize it.
  Use below information
  :
    - Current script: 
  ```python
  {current_script}
  ```
  
    - Solution: {solution}
  
    - How to modify: {summary}